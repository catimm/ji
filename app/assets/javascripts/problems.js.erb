$(document).ready(function(){

	//code to start providing input
	$("#provideInput").on("click", function(){
		$("#initialVideo").removeClass("show").addClass("hidden");
		$("#pstep1").removeClass("hidden").addClass("show");
		$("#altVideo").removeClass("hidden").addClass("show");
	});
	
	//code to swap out video and add written functionality
	$(".noWebcam").on("click", function(){
	    
	    if ($(this).hasClass("two")) {
	    	if ($("#problemTwo").hasClass("show")) {
	    		$("#problemTwo").removeClass("show").addClass("hidden");
				$("#textInputArea2").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");
				$("#step2Button").removeAttr('disabled');	
	    	} else {
	    		$("#problemTwo").removeClass("hidden").addClass("show");
	    		$("#textInputArea2").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    		$("#step2Button").attr('disabled', true);
	    	}

		} 
		if ($(this).hasClass("four")) {
	    	if ($("#problemFour").hasClass("show")) {
	    		$("#problemFour").removeClass("show").addClass("hidden");
				$("#textInputArea4").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");
				$("#step4Button").removeAttr('disabled');
	    	} else {
	    		$("#problemFour").removeClass("hidden").addClass("show");
	    		$("#textInputArea4").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    		$("#step4Button").attr('disabled', true);
	    	}

		} 
		if ($(this).hasClass("five")) {
	    	if ($("#problemFive").hasClass("show")) {
	    		$("#problemFive").removeClass("show").addClass("hidden");
				$("#textInputArea5").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");
				$("#step5Button").removeAttr('disabled');
	    	} else {
	    		$("#problemFive").removeClass("hidden").addClass("show");
	    		$("#textInputArea5").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    		$("#step5Button").attr('disabled', true);
	    	}

		} 
		if ($(this).hasClass("six")) {
	    	if ($("#problemSix").hasClass("show")) {
	    		$("#problemSix").removeClass("show").addClass("hidden");
				$("#textInputArea6").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");
				$("#step6Button").removeAttr('disabled');
	    	} else {
	    		$("#problemSix").removeClass("hidden").addClass("show");
	    		$("#textInputArea6").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    		$("#step6Button").attr('disabled', true);
	    	}

		} 
		if ($(this).hasClass("seven")) {
			if ($("#problemSeven").hasClass("show")) {
	    		$("#problemSeven").removeClass("show").addClass("hidden");
				$("#textInputArea7").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");
	    	} else {
	    		$("#problemSeven").removeClass("hidden").addClass("show");
	    		$("#textInputArea7").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    	}
		}
	});	
		
	//code to keep Next Step buttons disabled until video is published
	//code also sends extra information--camera name and user id--with each video to be stored in DB
	CameraTag.observe('problemTwo', "published", function(){			
		myCamera = CameraTag.cameras['problemTwo'];

		var js_object = {
		    camera: "problemTwo", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);
		
		$("#step2Button").removeAttr('disabled');
	});
		
	CameraTag.observe('problemFour', "published", function(){			
		myCamera = CameraTag.cameras['problemFour'];

		var js_object = {
		    camera: "problemFour", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);
		
		$("#step4Button").removeAttr('disabled');
	});
		
	CameraTag.observe('problemFive', "published", function(){			
		myCamera = CameraTag.cameras['problemFive'];

		var js_object = {
		    camera: "problemFive", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
		
		myCamera.addVideoData(js_object);
			
		$("#step5Button").removeAttr('disabled');
	});
		
	CameraTag.observe('problemSix', "published", function(){			
		myCamera = CameraTag.cameras['problemSix'];

		var js_object = {
		    camera: "problemSix", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);
		
		$("#step6Button").removeAttr('disabled');
	});
	
	// this last block doesn't keep the button inactive since the video submission is optional	
	CameraTag.observe('problemSeven', "published", function(){			
		myCamera = CameraTag.cameras['problemSeven'];

		var js_object = {
		    camera: "problemSeven", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);

	});
		
});