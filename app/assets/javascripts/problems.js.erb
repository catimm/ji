$(document).ready(function(){

	
	//code to check if written input has been provided
	$("#textInputArea1").on("keyup", function(){
		$(".responseButton").removeAttr('disabled');
	});
	$("#textInputArea3").on("keyup", function(){
		$(".responseButton").removeAttr('disabled');
	});
	
	$(".noWebcam").on("click", function(){
	    
	    if ($(this).hasClass("one")) {
	    	if ($("#problemTwo").hasClass("show")) {
	    		$("#problemTwo").removeClass("show").addClass("hidden");
				$("#textInputArea1").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");	
	    	} else {
	    		$("#problemTwo").removeClass("hidden").addClass("show");
	    		$("#textInputArea1").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    		$("#step1Button").attr('disabled', true);
	    	}

		} 
		if ($(this).hasClass("three")) {
	    	if ($("#problemFour").hasClass("show")) {
	    		$("#problemFour").removeClass("show").addClass("hidden");
				$("#textInputArea3").removeClass("hidden").addClass("show");
				$(".noWebcam").html("Use webcam option.");
	    	} else {
	    		$("#problemFour").removeClass("hidden").addClass("show");
	    		$("#textInputArea3").removeClass("show").addClass("hidden");
	    		$(".noWebcam").html("Provide written response instead.");
	    		$("#step3Button").attr('disabled', true);
	    	}

		} 
	});
	
	//code also sends extra information--camera name and user id--with each video to be stored in DB
	CameraTag.observe('problemTwo', "published", function(){				
		myCamera = CameraTag.cameras['problemTwo'];

		var js_object = {
		    camera: "problemTwo", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
		
		myCamera.addVideoData(js_object);
		
		$("#step1Button").removeAttr('disabled');
	});
		
	CameraTag.observe('problemFour', "published", function(){			
		myCamera = CameraTag.cameras['problemFour'];

		var js_object = {
		    camera: "problemFour", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);
		
		$("#step3Button").removeAttr('disabled');
	});
		
	CameraTag.observe('problemFive', "published", function(){			
		myCamera = CameraTag.cameras['problemFive'];

		var js_object = {
		    camera: "problemFive", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
		
		myCamera.addVideoData(js_object);
			
		$("#step5Button").removeAttr('disabled');
	});
		
	CameraTag.observe('problemSix', "published", function(){			
		myCamera = CameraTag.cameras['problemSix'];

		var js_object = {
		    camera: "problemSix", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);
		
		$("#step6Button").removeAttr('disabled');
	});
	
	// this last block doesn't keep the button inactive since the video submission is optional	
	CameraTag.observe('problemSeven', "published", function(){			
		myCamera = CameraTag.cameras['problemSeven'];

		var js_object = {
		    camera: "problemSeven", 
		    user: gon.current_user,
		    exploration_id: gon.exploration_id,
		    step: gon.step
		};
			
		myCamera.addVideoData(js_object);

	});
		
});